<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gabriele Filomena">
<meta name="dcterms.date" content="2025-10-22">

<title>Exploring the Social World - Quantitative Block: Statistics - 2&nbsp; Lab: Exploring a Dataset</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../labs/02.MultipleLinear.html" rel="next">
<link href="../labs/00.introR.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../labs/01.DataExploration.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Lab: Exploring a Dataset</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Exploring the Social World - Quantitative Block: Statistics</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/GDSL-UL/stats" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../Exploring-the-Social-World---Quantitative-Block--Statistics.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/assessment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assessment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/howSubmit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assessment: How to submit</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/reportTemplate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ENVS225 Assignment 1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../general/wdPaths.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Working Directories and Paths</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/00.introR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Lab: Introduction to R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/01.DataExploration.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Lab: Exploring a Dataset</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/02.MultipleLinear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab: Correlation, Single, and Multiple Linear Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/03.QualitativeVariable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Lab: Correlation and Multiple Linear Regression with Qualitative Variables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/04.LogisticRegression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Lab: Logistic Regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../labs/05.Visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab: Data Visualisation with ggplot</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#practice-dataset-and-dataframes" id="toc-practice-dataset-and-dataframes" class="nav-link active" data-scroll-target="#practice-dataset-and-dataframes"><span class="header-section-number">2.1</span> Practice: Dataset and Dataframes</a>
  <ul class="collapse">
  <li><a href="#datasets-in-r" id="toc-datasets-in-r" class="nav-link" data-scroll-target="#datasets-in-r"><span class="header-section-number">2.1.1</span> Datasets in R</a></li>
  <li><a href="#importing-data-in-r" id="toc-importing-data-in-r" class="nav-link" data-scroll-target="#importing-data-in-r"><span class="header-section-number">2.1.2</span> Importing Data in R</a></li>
  </ul></li>
  <li><a href="#practice-descriptive-statistics" id="toc-practice-descriptive-statistics" class="nav-link" data-scroll-target="#practice-descriptive-statistics"><span class="header-section-number">2.2</span> Practice: Descriptive Statistics</a>
  <ul class="collapse">
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data"><span class="header-section-number">2.2.1</span> Summarizing Data</a></li>
  <li><a href="#understanding-the-structure-of-the-frs-datafile" id="toc-understanding-the-structure-of-the-frs-datafile" class="nav-link" data-scroll-target="#understanding-the-structure-of-the-frs-datafile"><span class="header-section-number">2.2.2</span> Understanding the Structure of the FRS Datafile</a></li>
  <li><a href="#explore-the-distribution-of-your-outcome-variable" id="toc-explore-the-distribution-of-your-outcome-variable" class="nav-link" data-scroll-target="#explore-the-distribution-of-your-outcome-variable"><span class="header-section-number">2.2.3</span> Explore the Distribution of Your Outcome Variable</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/GDSL-UL/stats/edit/main/labs/01.DataExploration.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Lab: Exploring a Dataset</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gabriele Filomena </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 22, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>The following material has been readapted from</em>:</p>
<ul>
<li>https://pietrostefani.github.io/gds/environR.html by Elisabetta Pietrostefani and Carmen Cabrera-Arnau</li>
<li>https://raw.githubusercontent.com/dereksonderegger/570L/master/07_DataImport.Rmd</li>
</ul>
<p>The lecture’s slides can be found <a href="https://github.com/GDSL-UL/stats/blob/main/lectures/lecture01.pdf">here</a>.</p>
<p>Before completing the practical, please take this <a href="https://canvas.liverpool.ac.uk/courses/84668/quizzes/168721">quiz</a>.</p>
<p>For the lab sessions and your assignment, you will need the following software:</p>
<ul>
<li>R-4.2.2 (or higher) <a href="https://cran.r-project.org/">The Comprehensive R Archive Network (CRAN)</a></li>
<li>RStudio 2022.12.0-353 (or higher) <a href="https://posit.co/download/rstudio-desktop/">Posit</a></li>
</ul>
<p><strong>IMPORTANT: Before starting: verify that you have set the directory correctly and familiarise yourself with working with directories and loading files. These are the <a href="https://gdsl-ul.github.io/stats/general/wdPaths.html">instructions</a></strong>.</p>
<p><strong>Now create a .qmd project. We use the <code>File -&gt; New File -&gt; Quarto Document..</code> dropdown option; a menu will appear asking you for the document title, author, and preferred output type. You can select HTML. Call it “<em>week1</em>” and save it in your main folder.</strong></p>
<p>Follow the practical below. You can describe what you are doing in normal text. See <a href="https://quarto.org/docs/authoring/markdown-basics.html">here</a> for how to format normal text in Markdown documents</p>
<p>Remember, when you want to write code in a markdown document you have to enclose it like this:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="../img/codeChunk.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>or you can insert it manually:</p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="../img/codeChunk_visual.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="practice-dataset-and-dataframes" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="practice-dataset-and-dataframes"><span class="header-section-number">2.1</span> Practice: Dataset and Dataframes</h2>
<p>Within this module we will be working with data stored in so-called datasets. A dataset is a structured collection of data points that represent various measurements or observations, often organized in a tabular format with rows and columns. A dataset might contain information about different locations, such as neighborhoods or cities, with each row representing a place and each column detailing characteristics like population density, average income, or number of green parks. For example, a dataset could be compiled to study patterns in urban mobility, where the data includes the number of daily commuters, the distance they travel, and the mode of transport they use. Datasets provide the essential building blocks for statistical analysis; they enable exploring relationships, identifying patterns, and drawing conclusions about certain phenomena.</p>
<p>Examples of everyday datasets:</p>
<ul>
<li><strong>Premier League Standings</strong>: Each row represents a team, with columns for points, games played, wins, draws, and losses.</li>
<li><strong>Movie Dataset</strong>: Each row represents a movie, with columns showing its title, genre, release year, director, and rating.</li>
<li><strong>Weather Dataset</strong>: Each row shows a day’s weather in a city, with columns for temperature, humidity, wind speed, and precipitation.</li>
</ul>
<p>Usually, data is organized in</p>
<ul>
<li><strong>Columns</strong> of data representing some trait or variable that we might be interested in. In general, we might wish to investigate the relationship between variables.</li>
<li><strong>Rows</strong> represent a single object on which the column traits are measured.</li>
</ul>
<p>For example, in a grade book for recording students scores throughout the semester, their is one row for every student and columns for each assignment. A greenhouse experiment dataset will have a row for every plant and columns for treatment type and biomass.</p>
<section id="datasets-in-r" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="datasets-in-r"><span class="header-section-number">2.1.1</span> Datasets in R</h3>
<p>In R, we want a way of storing data where it feels just as if we had an Excel Spreadsheet where each row represents an observation and each column represents some information about that observation. We will call this object a <code>data.frame</code>, an R represention of a data set. The easiest way to understand data frames is to create one.</p>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Copy the code below in your markdown. Create a <code>data.frame</code> that represents an instructor’s grade book, where each row is a student, and each column represents some sort of assessment.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Grades <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Name  =</span> <span class="fu">c</span>(<span class="st">'Bob'</span>,<span class="st">'Jeff'</span>,<span class="st">'Mary'</span>,<span class="st">'Valerie'</span>),     </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Exam.1 =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">75</span>, <span class="dv">92</span>, <span class="dv">85</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Exam.2 =</span> <span class="fu">c</span>(<span class="dv">87</span>, <span class="dv">71</span>, <span class="dv">95</span>, <span class="dv">81</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the data.frame </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># View(Grades)  # show the data in an Excel-like tab.  Doesn't work when knitting </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>Grades          <span class="co"># show the output in the console. This works when knitting</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Name Exam.1 Exam.2
1     Bob     90     87
2    Jeff     75     71
3    Mary     92     95
4 Valerie     85     81</code></pre>
</div>
</div>
<p><strong>To execute just one chunk of code press the green arrow top-right of the chunk:</strong></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="../img/runChunk.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>R allows two differnt was to access elements of the <code>data.frame</code>. First is a matrix-like notation for accessing particular values.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Format</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[a,b]</code></td>
<td>Element in row <code>a</code> and column <code>b</code></td>
</tr>
<tr class="even">
<td><code>[a,]</code></td>
<td>All of row <code>a</code></td>
</tr>
<tr class="odd">
<td><code>[,b]</code></td>
<td>All of column <code>b</code></td>
</tr>
</tbody>
</table>
<p>Because the columns have meaning and we have given them column names, it is desirable to want to access an element by the name of the column as opposed to the column number.</p>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Copy and Run:</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Grades[, <span class="dv">2</span>]       <span class="co"># print out all of column 2 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 90 75 92 85</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Grades<span class="sc">$</span>Name       <span class="co"># The $-sign means to reference a column by its label</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Bob"     "Jeff"    "Mary"    "Valerie"</code></pre>
</div>
</div>
</section>
<section id="importing-data-in-r" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="importing-data-in-r"><span class="header-section-number">2.1.2</span> Importing Data in R</h3>
<p>Usually we won’t type the data in by hand, but rather load the data from some package. Reading data from external sources is a necessary skill.</p>
<p><strong><em>Comma Separated Values</em></strong> <strong>Data</strong></p>
<p>To consider how data might be stored, we first consider the simplest file format: the comma separated values file (<code>.csv</code>). In this file type, each of the “cells” of data are separated by a comma. For example, the data file storing scores for three students might be as follows:</p>
<pre><code>Able, Dave, 98, 92, 94
Bowles, Jason, 85, 89, 91
Carr, Jasmine, 81, 96, 97</code></pre>
<p>Typically when you open up such a file on a computer with MS Excel installed, Excel will open up the file assuming it is a spreadsheet and put each element in its own cell. However, you can also open the file using a more primitive program (say Notepad in Windows, TextEdit on a Mac) you’ll see the raw form of the data.</p>
<p>Having just the raw data without any sort of column header is problematic (which of the three exams was the final??). Ideally we would have column headers that store the name of the column.</p>
<pre><code>LastName, FirstName, Exam1, Exam2, FinalExam
Able, Dave, 98, 92, 94
Bowles, Jason, 85, 89, 91
Carr, Jasmine, 81, 96, 97</code></pre>
<p><strong>Reading (<code>.csv</code>) files</strong></p>
<p>To make R read in the data arranged in this format, we need to tell R three things:</p>
<ol type="1">
<li><p>Where does the data live? Often this will be the name of a file on your computer, but the file could just as easily live on the internet (provided your computer has internet access).</p></li>
<li><p>Is the first row data or is it the column names?</p></li>
<li><p>What character separates the data? Some programs store data using tabs to distinguish between elements, some others use white space. R’s mechanism for reading in data is flexible enough to allow you to specify what the separator is.</p></li>
</ol>
<p>The primary function that we’ll use to read data from a file and into R is the function <code>read.csv()</code>. This function has many optional arguments but the most commonly used ones are outlined in the table below.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Argument</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>file</code></td>
<td>Required</td>
<td>A character string denoting the file location.</td>
</tr>
<tr class="even">
<td><code>header</code></td>
<td><code>TRUE</code></td>
<td>Specifies whether the first line contains column headers.</td>
</tr>
<tr class="odd">
<td><code>sep</code></td>
<td><code>","</code></td>
<td>Specifies the character that separates columns. For <code>read.csv()</code>, this is usually a comma.</td>
</tr>
<tr class="even">
<td><code>skip</code></td>
<td><code>0</code></td>
<td>The number of lines to skip before reading data; useful for files with descriptive text before the actual data.</td>
</tr>
<tr class="odd">
<td><code>na.strings</code></td>
<td><code>"NA"</code></td>
<td>Values that represent missing data; multiple values can be specified, e.g., <code>c("NA", "-9999")</code>.</td>
</tr>
<tr class="even">
<td><code>quote</code></td>
<td><code>"</code></td>
<td>Specifies the character used to quote character strings, typically <code>"</code> or <code>'</code>.</td>
</tr>
<tr class="odd">
<td><code>stringsAsFactors</code></td>
<td><code>FALSE</code></td>
<td>Controls whether character strings are converted to factors; <code>FALSE</code> means they remain as character data.</td>
</tr>
<tr class="even">
<td><code>row.names</code></td>
<td><code>NULL</code></td>
<td>Allows specifying a column as row names, or assigning <code>NULL</code> to use default indexing for rows.</td>
</tr>
<tr class="odd">
<td><code>colClasses</code></td>
<td><code>NULL</code></td>
<td>Specifies the data type for each column to speed up reading for large files, e.g., <code>c("character", "numeric")</code>.</td>
</tr>
<tr class="even">
<td><code>encoding</code></td>
<td><code>"unknown"</code></td>
<td>Sets the text encoding of the file, which can be useful for files with special or international characters.</td>
</tr>
</tbody>
</table>
<p>Most of the time you just need to specify the file. |</p>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p>Task: Let’s read in a dataset of terrorist attacks that have taken place in the UK:</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>attacks <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file   =</span> <span class="st">'../data/attacksUK.csv'</span>)  <span class="co"># where the data lives                                 </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(attacks)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="practice-descriptive-statistics" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="practice-descriptive-statistics"><span class="header-section-number">2.2</span> Practice: Descriptive Statistics</h2>
<section id="summarizing-data" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="summarizing-data"><span class="header-section-number">2.2.1</span> Summarizing Data</h3>
<p>It is very important to be able to take a data set and produce summary statistics such as the mean and standard deviation of a column. For this sort of manipulation, we use the package <code>dplyr</code>. This package allows chaining together many common actions to form a particular task.</p>
<p>The fundamental operations to perform on a data set are:</p>
<ul>
<li><p><strong>Subsetting</strong> - Returns a dataframe with only particular columns or rows</p>
<p>– <code>select</code> - Selecting a subset of columns by name or column number.</p>
<p>– <code>filter</code> - Selecting a subset of rows from a data frame based on logical expressions.</p>
<p>– <code>slice</code> - Selecting a subset of rows by row number.</p></li>
<li><p><code>arrange</code> - Re-ordering the rows of a data frame.</p></li>
<li><p><code>mutate</code> - Add a new column that is some function of other columns.</p></li>
<li><p><code>summarise</code> - calculate some summary statistic of a column of data. This collapses a set of rows into a single row.</p></li>
</ul>
<p>Each of these operations is a function in the package <code>dplyr</code>. These functions all have a similar calling syntax:</p>
<ul>
<li><p>The first argument is a data set.</p></li>
<li><p>Subsequent arguments describe what to do with the input data frame and you can refer to the columns without using the <code>df$column</code> notation.</p></li>
</ul>
<p>All of these functions will return a data set.</p>
<p>Let’s consider the <code>summarize</code> function to calculate the mean score for <code>Exam.1</code>. Notice that this takes a data frame of four rows, and summarizes it down to just one row that represents the summarized data for all four students.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># load the library</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Grades <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( <span class="at">Exam.1.mean =</span> <span class="fu">mean</span>( Exam<span class="fl">.1</span> ) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Exam.1.mean
1        85.5</code></pre>
</div>
</div>
<p>Similarly you could calculate the <strong>standard deviation</strong> for the exam as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Grades <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( <span class="at">Exam.1.mean =</span> <span class="fu">mean</span>( Exam<span class="fl">.1</span> ),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">Exam.1.sd   =</span> <span class="fu">sd</span>(   Exam<span class="fl">.1</span>   ) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Exam.1.mean Exam.1.sd
1        85.5  7.593857</code></pre>
</div>
</div>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task:</strong> Write the code above in your markdown file and run it. Do not to copy it this time.</p>
</div>
<p>The <code>%&gt;%</code> operator works by translating the command <code>a %&gt;% f(b)</code> to the expression <code>f(a,b)</code>. This operator works on any function <code>f</code>. This is useful when we want to start with <code>x</code>, and first apply a function <code>f()</code>, then <code>g()</code>, and then <code>h()</code>; the usual R command would be <code>h(g(f(x)))</code> which is hard to read. Using the pipe command <code>%&gt;%</code>, this sequence of operations becomes <code>x %&gt;% f() %&gt;% g() %&gt;% h()</code>.</p>
<p>Below, the code takes the Grades dataframe and calculates a column for the average exam score, and then sorts the data according to the that average score</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Grades <span class="sc">%&gt;%</span>   <span class="fu">mutate</span>( <span class="at">Avg.Score =</span> (Exam<span class="fl">.1</span> <span class="sc">+</span> Exam<span class="fl">.2</span>) <span class="sc">/</span> <span class="dv">2</span> ) <span class="sc">%&gt;%</span>   <span class="fu">arrange</span>( Avg.Score )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Name Exam.1 Exam.2 Avg.Score
1    Jeff     75     71      73.0
2 Valerie     85     81      83.0
3     Bob     90     87      88.5
4    Mary     92     95      93.5</code></pre>
</div>
</div>
<p>You don’t have to memorise this.</p>
<p>Let’s go back to the terrorist attacks dataframe. There are attacks perpetrated by several different groups. Each record is a single attack and contains information about who perpetrated the attack, what year, how many were killed and how many were wounded. You can get a glimpse of the dataframe with the function head</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(attacks, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   nrKilled nrWound year        country                        group
1         0       0 2005 United Kingdom   Abu Hafs al-Masri Brigades
2         0       0 2005 United Kingdom   Abu Hafs al-Masri Brigades
3         0       0 2005 United Kingdom   Abu Hafs al-Masri Brigades
4         0       0 2005 United Kingdom   Abu Hafs al-Masri Brigades
5         0       1 1982 United Kingdom Abu Nidal Organization (ANO)
6         0       0 2014 United Kingdom                   Anarchists
7         0       0 2014 United Kingdom                   Anarchists
8         0       0 2014 United Kingdom                   Anarchists
9         0       0 2014 United Kingdom                   Anarchists
10        0       0 2014 United Kingdom                   Anarchists
                           attack                      target
1               Bombing/Explosion              Transportation
2               Bombing/Explosion              Transportation
3               Bombing/Explosion              Transportation
4               Bombing/Explosion              Transportation
5                   Assassination     Government (Diplomatic)
6  Facility/Infrastructure Attack                    Business
7  Facility/Infrastructure Attack                    Business
8  Facility/Infrastructure Attack                    Business
9  Facility/Infrastructure Attack Private Citizens &amp; Property
10 Facility/Infrastructure Attack                      Police
                      weapon
1  Explosives/Bombs/Dynamite
2  Explosives/Bombs/Dynamite
3  Explosives/Bombs/Dynamite
4  Explosives/Bombs/Dynamite
5                   Firearms
6                 Incendiary
7                 Incendiary
8                 Incendiary
9                 Incendiary
10                Incendiary</code></pre>
</div>
</div>
<p>We might want to compare different actors and see the mean and standard deviation of the number of people wound, by each group’s attack, across time. To do this, we are still going to use the <code>summarize</code>, but we will precede that with <code>group_by(group)</code> to tell the subsequent <code>dplyr</code> functions to perform the actions separately for each breed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>attacks <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>( group) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>( <span class="at">Mean =</span> <span class="fu">mean</span>(attacks<span class="sc">$</span>nrWound), </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">Std.Dev =</span> <span class="fu">sd</span>(attacks<span class="sc">$</span>nrWound))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 × 3
   group                                               Mean Std.Dev
   &lt;chr&gt;                                              &lt;dbl&gt;   &lt;dbl&gt;
 1 Abu Hafs al-Masri Brigades                         0.963    7.22
 2 Abu Nidal Organization (ANO)                       0.963    7.22
 3 Anarchists                                         0.963    7.22
 4 Animal Liberation Front (ALF)                      0.963    7.22
 5 Animal Rights Activists                            0.963    7.22
 6 Armenian Secret Army for the Liberation of Armenia 0.963    7.22
 7 Black September                                    0.963    7.22
 8 Continuity Irish Republican Army (CIRA)            0.963    7.22
 9 Dissident Republicans                              0.963    7.22
10 Informal Anarchist Federation                      0.963    7.22
# ℹ 28 more rows</code></pre>
</div>
</div>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task:</strong> Write the code above in your markdown file and run it. Try out another categorical variable instead of <code>group</code> (e.g.&nbsp;<code>year</code>) and <code>nrKilled</code> instead of <code>nrWound</code>.</p>
</div>
<p>Let’s now move to another dataset to address a research question.</p>
<p>For illustration purposes, we will use the <strong>Family Resources Survey (FRS)</strong>. The FRS is an annual survey conducted by the UK government that collects detailed information about the income, living conditions, and resources of private households across the United Kingdom. Managed by the Department for Work and Pensions (DWP), the FRS provides data that is essential for understanding the economic and social conditions of households and informing public policy.</p>
<p>Consider questions such as:</p>
<ul>
<li>How many respondents (persons) are there in the 2016-17 FRS?</li>
<li>How many variables (population attributes) are there?</li>
<li>What types of variables are present in the FRS?</li>
<li>What is the most detailed geography available in the FRS?</li>
</ul>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: To answer these questions, <a href="https://canvas.liverpool.ac.uk/courses/84668/files/12887864?wrap=1">download</a> from Canvas, save in the data folder, load and inspect the dataset.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the FRS dataset should be already loaded, otherwise</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>frs_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"../data/FRS/FRS16-17_labels.csv"</span>) </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display basic structure </span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(frs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 44,145
Columns: 45
$ household        &lt;int&gt; 6087, 6101, 6103, 6122, 6134, 6136, 6138, 6140, 6143,…
$ family           &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ person           &lt;int&gt; 5, 3, 3, 3, 2, 4, 4, 3, 3, 4, 4, 3, 4, 2, 5, 3, 4, 3,…
$ country          &lt;chr&gt; "England", "England", "England", "Northern Ireland", …
$ region           &lt;chr&gt; "London", "South East", "Yorks and the Humber", "Nort…
$ age_group        &lt;chr&gt; "05-10", "05-10", "05-10", "05-10", "05-10", "05-10",…
$ sex              &lt;chr&gt; "Female", "Male", "Male", "Female", "Female", "Female…
$ marital_status   &lt;chr&gt; "Single", "Single", "Single", "Single", "Single", "Si…
$ ethnicity        &lt;chr&gt; "Mixed / multiple ethnic groups", "White", "White", "…
$ hrp              &lt;chr&gt; "Not HRP", "Not HRP", "Not HRP", "Not HRP", "Not HRP"…
$ rel_to_hrp       &lt;chr&gt; "Son/daughter (incl. adopted)", "Son/daughter (incl. …
$ lifestage        &lt;chr&gt; "Child (0-17)", "Child (0-17)", "Child (0-17)", "Chil…
$ dependent        &lt;chr&gt; "Dependent", "Dependent", "Dependent", "Dependent", "…
$ arrival_year     &lt;chr&gt; "UK Born", "UK Born", "UK Born", "UK Born", "UK Born"…
$ birth_country    &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ care_hours       &lt;chr&gt; "0 hours per week", "0 hours per week", "0 hours per …
$ educ_age         &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ educ_type        &lt;chr&gt; "School (full-time)", "School (full-time)", "School (…
$ fam_youngest     &lt;chr&gt; "7", "4", "0", "7", "0", "9", "10", "0", "3", "10", "…
$ fam_toddlers     &lt;int&gt; 0, 1, 1, 0, 2, 0, 0, 2, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1,…
$ fam_size         &lt;int&gt; 4, 4, 4, 3, 4, 4, 3, 5, 4, 4, 3, 4, 4, 3, 5, 4, 4, 4,…
$ happy            &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ health           &lt;chr&gt; "Not known", "Not known", "Not known", "Not known", "…
$ hh_accom_type    &lt;chr&gt; "Terraced house/bungalow", "Detached house/bungalow",…
$ hh_benefits      &lt;int&gt; 10868, 0, 1768, 8632, 8372, 1768, 1768, 1768, 0, 0, 1…
$ hh_composition   &lt;chr&gt; "Three or more adults, 1+ children", "One adult femal…
$ hh_ctax_band     &lt;chr&gt; "Band D", "Band F", "Band A", "Band B", "Band A", "Ba…
$ hh_housing_costs &lt;chr&gt; "4316", "10296", "5408", "Northern Ireland", "5720", …
$ hh_income_gross  &lt;int&gt; 54236, 180804, 26936, 19968, 17992, 76596, 31564, 366…
$ hh_income_net    &lt;int&gt; 44668, 120640, 23556, 19968, 17992, 62868, 29744, 287…
$ hh_size          &lt;int&gt; 5, 4, 4, 3, 4, 4, 4, 5, 4, 4, 4, 4, 4, 5, 5, 4, 4, 4,…
$ hh_tenure        &lt;chr&gt; "Mortgaged (including part rent / part own)", "Mortga…
$ highest_qual     &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ income_gross     &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ income_net       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ jobs             &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ life_satisf      &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ nssec            &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ sic_chapter      &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ sic_division     &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ soc2010          &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ work_hours       &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ workstatus       &lt;chr&gt; "Dependent Child", "Dependent Child", "Dependent Chil…
$ years_ft_work    &lt;chr&gt; "Dependent child", "Dependent child", "Dependent chil…
$ survey_weight    &lt;int&gt; 2315, 1317, 2449, 427, 1017, 1753, 1363, 1344, 828, 1…</code></pre>
</div>
</div>
<p>and summary:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(frs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   household         family          person       country         
 Min.   :    1   Min.   :1.000   Min.   :1.00   Length:44145      
 1st Qu.: 4816   1st Qu.:1.000   1st Qu.:1.00   Class :character  
 Median : 9673   Median :1.000   Median :2.00   Mode  :character  
 Mean   : 9677   Mean   :1.106   Mean   :1.98                     
 3rd Qu.:14553   3rd Qu.:1.000   3rd Qu.:3.00                     
 Max.   :19380   Max.   :6.000   Max.   :9.00                     
    region           age_group             sex            marital_status    
 Length:44145       Length:44145       Length:44145       Length:44145      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
  ethnicity             hrp             rel_to_hrp         lifestage        
 Length:44145       Length:44145       Length:44145       Length:44145      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
  dependent         arrival_year       birth_country       care_hours       
 Length:44145       Length:44145       Length:44145       Length:44145      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
   educ_age          educ_type         fam_youngest        fam_toddlers   
 Length:44145       Length:44145       Length:44145       Min.   :0.0000  
 Class :character   Class :character   Class :character   1st Qu.:0.0000  
 Mode  :character   Mode  :character   Mode  :character   Median :0.0000  
                                                          Mean   :0.2557  
                                                          3rd Qu.:0.0000  
                                                          Max.   :4.0000  
    fam_size        happy              health          hh_accom_type     
 Min.   :1.000   Length:44145       Length:44145       Length:44145      
 1st Qu.:2.000   Class :character   Class :character   Class :character  
 Median :2.000   Mode  :character   Mode  :character   Mode  :character  
 Mean   :2.599                                                           
 3rd Qu.:4.000                                                           
 Max.   :9.000                                                           
  hh_benefits    hh_composition     hh_ctax_band       hh_housing_costs  
 Min.   :    0   Length:44145       Length:44145       Length:44145      
 1st Qu.:    0   Class :character   Class :character   Class :character  
 Median : 1768   Mode  :character   Mode  :character   Mode  :character  
 Mean   : 5670                                                           
 3rd Qu.:10192                                                           
 Max.   :54080                                                           
 hh_income_gross   hh_income_net        hh_size      hh_tenure        
 Min.   :-326092   Min.   :-334776   Min.   :1.00   Length:44145      
 1st Qu.:  22256   1st Qu.:  20748   1st Qu.:2.00   Class :character  
 Median :  35984   Median :  31512   Median :3.00   Mode  :character  
 Mean   :  46076   Mean   :  37447   Mean   :2.96                     
 3rd Qu.:  57252   3rd Qu.:  47008   3rd Qu.:4.00                     
 Max.   :1165216   Max.   :1116596   Max.   :9.00                     
 highest_qual        income_gross       income_net          jobs          
 Length:44145       Min.   :-354848   Min.   :-358592   Length:44145      
 Class :character   1st Qu.:     52   1st Qu.:      0   Class :character  
 Mode  :character   Median :  12740   Median :  12012   Mode  :character  
                    Mean   :  17305   Mean   :  14204                     
                    3rd Qu.:  23712   3rd Qu.:  20384                     
                    Max.   :1127360   Max.   :1110928                     
 life_satisf           nssec           sic_chapter        sic_division      
 Length:44145       Length:44145       Length:44145       Length:44145      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
   soc2010           work_hours         workstatus        years_ft_work     
 Length:44145       Length:44145       Length:44145       Length:44145      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
 survey_weight  
 Min.   :  221  
 1st Qu.: 1097  
 Median : 1380  
 Mean   : 1459  
 3rd Qu.: 1742  
 Max.   :39675  </code></pre>
</div>
</div>
</section>
<section id="understanding-the-structure-of-the-frs-datafile" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="understanding-the-structure-of-the-frs-datafile"><span class="header-section-number">2.2.2</span> Understanding the Structure of the FRS Datafile</h3>
<p>In the FRS data structure, each row represents a person, but:</p>
<ul>
<li>Each person is nested within a family.</li>
<li>Each family is nested within a household.</li>
</ul>
<p>Below is an example dataset structure:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>household</th>
<th>family</th>
<th>person</th>
<th>region</th>
<th>age_group</th>
<th>sex</th>
<th>marital_status</th>
<th>rel_to_hrp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>1</td>
<td>London</td>
<td>40-44</td>
<td>Female</td>
<td>Married/Civil partnership</td>
<td>Spouse</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>2</td>
<td>London</td>
<td>40-44</td>
<td>Male</td>
<td>Married/Civil partnership</td>
<td>Household Representative</td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>3</td>
<td>London</td>
<td>5-10</td>
<td>Male</td>
<td>Single</td>
<td>Son/daughter (incl.&nbsp;adopted)</td>
</tr>
<tr class="even">
<td>1</td>
<td>1</td>
<td>4</td>
<td>London</td>
<td>5-10</td>
<td>Female</td>
<td>Single</td>
<td>Son/daughter (incl.&nbsp;adopted)</td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
<td>5</td>
<td>London</td>
<td>16-19</td>
<td>Male</td>
<td>Single</td>
<td>Step-son/daughter</td>
</tr>
<tr class="even">
<td>2</td>
<td>1</td>
<td>1</td>
<td>Scotland</td>
<td>35-39</td>
<td>Male</td>
<td>Single</td>
<td>Household Representative</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>1</td>
<td>Yorks and the Humber</td>
<td>35-39</td>
<td>Female</td>
<td>Married/Civil partnership</td>
<td>Household Representative</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>2</td>
<td>Yorks and the Humber</td>
<td>35-39</td>
<td>Male</td>
<td>Married/Civil partnership</td>
<td>Spouse</td>
</tr>
<tr class="odd">
<td>3</td>
<td>1</td>
<td>3</td>
<td>Yorks and the Humber</td>
<td>5-10</td>
<td>Male</td>
<td>Single</td>
<td>Step-son/daughter</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
<td>1</td>
<td>Wales</td>
<td>0-4</td>
<td>Male</td>
<td>Single</td>
<td>Son/daughter (incl.&nbsp;adopted)</td>
</tr>
<tr class="odd">
<td>4</td>
<td>1</td>
<td>2</td>
<td>Wales</td>
<td>60-64</td>
<td>Male</td>
<td>Married/Civil partnership</td>
<td>Household Representative</td>
</tr>
<tr class="even">
<td>4</td>
<td>1</td>
<td>3</td>
<td>Wales</td>
<td>55-59</td>
<td>Female</td>
<td>Married/Civil partnership</td>
<td>Spouse</td>
</tr>
<tr class="odd">
<td>4</td>
<td>2</td>
<td>3</td>
<td>Wales</td>
<td>30-34</td>
<td>Female</td>
<td>Single</td>
<td>Son/daughter (incl.&nbsp;adopted)</td>
</tr>
</tbody>
</table>
<p>The first five people in the FRS all belong to the same household (household 1); they also all belong to the same family. This family comprises a married middle-aged couple plus their three children, one of whom is a stepson.</p>
<p>The second household (household 2) comprises only one person – a single middle-aged male.The third household comprises another married couple, this time with two children.</p>
<p>Superficially the fourth household looks similar to households 1 and 2: a married couple plus their daughter. The difference is that this particular married couple is nearing retirement age, and their daughter is middle-aged. Consequently, despite being a child of the married couple, the middle-aged daughter is treated as a separate ‘family’ (family 2 in the household). This is because the FRS (and Census) define a ‘family’ as a couple plus any ‘dependent’ children. A dependent child is defined as a child who is either` aged 0-15 or aged 16-19, unmarried and in full-time education. All children aged 16-19 who are married or no longer in full-time education are regarded as ‘independent’ adults who form their own family unit, as are all children aged 20+.</p>
<p>The inclusion of all persons in a household allows us more flexibility in the types of research question we can answer. For example, we could explore how the likelihood of a woman being in paid employment <code>WorkStatus</code> is influenced by the age of the youngest child still living in her family (if any) <code>fam_youngest</code>.</p>
<p>In the FRS (and Census), a “family” is defined as a couple and any “dependent” children. Dependent children are defined as those aged 0–15, or aged 16–19 if unmarried and in full-time education.</p>
</section>
<section id="explore-the-distribution-of-your-outcome-variable" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="explore-the-distribution-of-your-outcome-variable"><span class="header-section-number">2.2.3</span> Explore the Distribution of Your Outcome Variable</h3>
<p>Before starting your analysis, it is critical to know the type of scale used to measure your outcome variable: is it categorical or continuous? Here we will start off by exploring a continuous variable which can then turn into a categorical variable (e.g.&nbsp;top earners: yes or no). We explore the income distribution in the UK by first looking at the low and high end of the distribution ie. What sorts of people have high (or low) incomes?</p>
<p>In the FRS each person’s annual income is recorded, both gross (pre-tax) and net (post-tax). This income includes all income sources, including earnings, profits, investment returns, state benefits, occupational pensions etc. As it is possible to make a loss on some of these activities, it is also possible (although unusual) for someone’s gross or net annual income in a given year to be negative (representing an overall loss).</p>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Load the FRS dataset into your R environment, if it’s not already loaded, and inspect the data.</p>
</div>
<p>Open the dataset in RStudio’s <strong>Data Viewer</strong> to explore its structure, including the <code>income_gross</code> and <code>income_net</code> variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Open the data in the RStudio Viewer</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(frs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>in the <strong>Data Viewer</strong> tab, scroll horizontally to locate the <code>income_gross</code> and <code>income_net</code> columns. If columns are listed alphabetically, they will appear near other attributes that start with “income.”</p>
<p>You should notice two things:</p>
<ul>
<li>Incomes are recorded to the nearest £, NOT in income bands.</li>
<li>Dependent children almost all have a recorded income of £0.</li>
</ul>
<p>This second observation highlights the somewhat loose wording of our question above (<em>What sorts of people have high (or low) incomes?</em>). To avoid reaching the somewhat banal conclusion that those with the lowest of all incomes are almost all children, we should re-frame the question more precisely as <em>What sorts of people (excluding dependent children) have low incomes?</em></p>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Determine the Scale of the Outcome Variable.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize income variables</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(frs_data<span class="sc">$</span>income_gross)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-354848      52   12740   17305   23712 1127360 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize income variables</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(frs_data<span class="sc">$</span>income_net)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-358592       0   12012   14204   20384 1110928 </code></pre>
</div>
</div>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Exclude Dependent Children.</p>
</div>
<p>You need to select all cases (persons) that are independent, that is where the variable <code>dependent</code> has values different from <code>!=</code> “Dependent” or equal <code>==</code> “Independent”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to include only independent persons</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>frs_independent <span class="ot">&lt;-</span> frs_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dependent <span class="sc">!=</span> <span class="st">"Dependent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Create a basic histogram (a visualisation lecture is scheduled later on).</p>
</div>
<p>The income variables in the FRS are all scale variables so a good starting point is to examine its distribution looking at a histogram of <code>income_gross</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>(frs_independent, <span class="fu">aes</span>(<span class="at">x =</span> income_gross)) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5000</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">title =</span> <span class="st">"Distribution of Gross Household Income"</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Gross Income (£)"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>   ) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">90000</span>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01.DataExploration_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You should see the histogram below. It reveals that the income distribution is very skewed with few people earning high salaries and the majority earning just over or less 35,000 annually.</p>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Adopt a regrouping strategy.</p>
</div>
<p>You can also cross-tabulate gross (or net) income with any of the other variables in the FRS to your heart’s content – or can you?</p>
<p>Again, here is important to recall that the income variables in the FRS are all ‘scale’ variables; in other words, they are precise measures rather than broad categories. Consequently, every single person in the FRS potentially has their own unique income value. That could make for a table c.&nbsp;44,000 rows long (one row per person) if each person has their own unique value. The solution is to create a categorical version of the original income variable by assigning each person to one of a set of income categories (income bands). Having done this, cross-tabulation then becomes possible.</p>
<p>But which strategy to use? Equal intervals, percentiles or ‘ad hoc’. Here I would suggest that ‘ad hoc’ is best: all you want to do is to allocate each independent adult to one of three arbitrarily defined groups: ‘low’, ‘middle’ and ‘high’ income. <strong>Define <code>Low</code> and <code>High</code> Income Thresholds</strong></p>
<p>Define thresholds for income categories:</p>
<ul>
<li>Low-income threshold: £________</li>
<li>High-income threshold: £_______</li>
</ul>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Create a New Variable Based on Regrouping of Original Variable.</p>
</div>
<p>Recode <code>income_gross</code> into categories based on the chosen thresholds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define thresholds for income categories </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>LOW_THRESHOLD <span class="ot">&lt;-</span> <span class="dv">10000</span> <span class="co"># Replace with the upper limit for low income </span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>HIGH_THRESHOLD <span class="ot">&lt;-</span> <span class="dv">50000</span> <span class="co"># Replace with the lower limit for high income </span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define income categories based on thresholds </span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>frs_independent <span class="ot">&lt;-</span> frs_independent <span class="sc">%&gt;%</span> </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">income_category =</span> <span class="fu">case_when</span>( </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        income_gross <span class="sc">&lt;=</span> LOW_THRESHOLD <span class="sc">~</span> <span class="st">"Low"</span>, </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>        income_gross <span class="sc">&gt;=</span> HIGH_THRESHOLD <span class="sc">~</span> <span class="st">"High"</span>, </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Middle"</span> ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>mutate()</code> function in R, from the <strong>dplyr</strong> package, is used to add or modify columns in a data frame. It allows you to create new variables or transform existing ones by applying calculations or conditional statements directly within the function.</p>
<p>Explanation of the code</p>
<ul>
<li><strong><code>frs_independent %&gt;%</code></strong>: The pipe operator <code>%&gt;%</code> sends <code>frs_independent</code> into <code>mutate()</code>, allowing us to apply transformations without reassigning it repeatedly.</li>
<li><strong><code>mutate()</code></strong>: Starts the transformation process by defining new or modified columns.</li>
<li><strong><code>income_category = case_when(...)</code></strong>:
<ul>
<li>This creates a new column named <code>income_category</code>.</li>
<li>The <code>case_when()</code> function defines conditions for assigning values to this new column.</li>
</ul></li>
<li><strong><code>case_when()</code></strong>:
<ul>
<li><code>case_when()</code> is used here to assign categorical labels based on conditions.</li>
<li><code>income_gross &lt;= LOW_THRESHOLD ~ "Low"</code>: If <code>income_gross</code> is less than or equal to <code>LOW_THRESHOLD</code>, <code>income_category</code> will be labeled “Low.”</li>
<li><code>income_gross &gt;= HIGH_THRESHOLD ~ "High"</code>: If <code>income_gross</code> is greater than or equal to <code>HIGH_THRESHOLD</code>, <code>income_category</code> will be labeled “High.”</li>
<li><code>TRUE ~ "Middle"</code>: Any values not meeting the previous conditions are labeled “Middle.”</li>
</ul></li>
</ul>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Add some Metadata.</p>
</div>
<p>Define metadata for the new variable by labeling income categories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add metadata by converting to a factor and defining labels</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>frs_independent<span class="sc">$</span>income_category <span class="ot">&lt;-</span> <span class="fu">factor</span>(frs_independent<span class="sc">$</span>income_category,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"Middle"</span>, <span class="st">"High"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&lt;= £10,000"</span>, <span class="st">"£10,001 - £49,999"</span>, <span class="st">"&gt;= £50,000"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="background-color: #FFFBCC; padding: 10px; border-radius: 5px; border: 1px solid #E1C948;">
<p><strong>Task</strong>: Check your work.</p>
</div>
<p>Examine the frequency distribution of the variable you have just created. Both variables should have the same number of missing cases, unless:</p>
<ul>
<li>Missing cases in the old variable have been intentionally converted into valid cases in the new variable.</li>
<li>You forgot to allocate a new value to one of the old variable categories, in which case the new variable will have more missing cases than the old variable.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequency distribution of income categories</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(frs_independent<span class="sc">$</span>income_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       &lt;= £10,000 £10,001 - £49,999        &gt;= £50,000 
             8584             22981              2271 </code></pre>
</div>
</div>
<p>After preparing the data, use cross-tabulations to compare income levels across demographic groups.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-tabulate income category by age group, nationality, etc.</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(frs_independent<span class="sc">$</span>income_category, frs_independent<span class="sc">$</span>age_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   
                    16-19 20-24 25-29 30-34 35-39 40-44 45-49 50-54 55-59 60-64
  &lt;= £10,000          373   680   492   558   474   511   554   652   781   826
  £10,001 - £49,999   263  1241  1802  2056  2052  1948  1995  1967  1749  1772
  &gt;= £50,000            1     8    59   186   314   331   334   356   237   177
                   
                    65-69 70-74  75+
  &lt;= £10,000          773   744 1166
  £10,001 - £49,999  2073  1554 2509
  &gt;= £50,000          144    56   68</code></pre>
</div>
</div>
<p>Explore income distribution across different regions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-tabulate income category by region</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(frs_independent<span class="sc">$</span>income_category, frs_independent<span class="sc">$</span>region) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   
                    East Midlands East of England London North East North West
  &lt;= £10,000                  562             665    740        357        878
  £10,001 - £49,999          1550            1855   1850        979       2347
  &gt;= £50,000                  135             245    367         48        174
                   
                    Northern Ireland Scotland South East South West Wales
  &lt;= £10,000                     874     1212        895        588   399
  £10,001 - £49,999             2305     3234       2563       1707   971
  &gt;= £50,000                     123      322        367        149    63
                   
                    West Midlands Yorks and the Humber
  &lt;= £10,000                  744                  670
  £10,001 - £49,999          1892                 1728
  &gt;= £50,000                  164                  114</code></pre>
</div>
</div>
<p><strong>Tips for Cross-Tabulation</strong></p>
<ul>
<li>Place the income variable in the columns.</li>
<li>Add multiple variables in the rows to create simultaneous cross-tabulations.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/gdsl-ul\.github\.io\/stats");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../labs/00.introR.html" class="pagination-link" aria-label="Lab: Introduction to R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Lab: Introduction to R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../labs/02.MultipleLinear.html" class="pagination-link" aria-label="Lab: Correlation, Single, and Multiple Linear Regression">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab: Correlation, Single, and Multiple Linear Regression</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Exploring the Social World - Quantitative Block: Statistics by Gabriele Filomena and Zi Ye.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/GDSL-UL/stats/edit/main/labs/01.DataExploration.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>